package io.quarkus.smallrye.openapi.deployment.spi;

import io.quarkus.builder.item.MultiBuildItem;
import io.smallrye.openapi.api.OpenApiDocument;
import io.smallrye.openapi.api.SmallRyeOpenAPI;

/**
 * The final OpenAPI Documents as generated by the Extension.
 */
public final class OpenApiDocumentBuildItem extends MultiBuildItem {

    private final OpenApiDocument openApiDocument;
    private final SmallRyeOpenAPI smallRyeOpenAPI;
    private final String documentName;

    public OpenApiDocumentBuildItem(OpenApiDocument openApiDocument, SmallRyeOpenAPI smallRyeOpenAPI, String documentName) {
        this.openApiDocument = openApiDocument;
        this.smallRyeOpenAPI = smallRyeOpenAPI;
        this.documentName = documentName;
    }

    public OpenApiDocument getOpenApiDocument() {
        return openApiDocument;
    }

    public SmallRyeOpenAPI getSmallRyeOpenAPI() {
        return smallRyeOpenAPI;
    }

    /**
     * Returns the document name as configured using
     * {@code quarkus.smallrye-openapi.<document-name>},
     * or {@link OpenAPISPIConstants#DEFAULT_DOCUMENT_NAME} for the default unnamed document.
     */
    public String getDocumentName() {
        return documentName;
    }

    /**
     * Helper method to figure out if this build item is for the default document
     */
    public boolean isDefaultDocument() {
        return OpenAPISPIConstants.DEFAULT_DOCUMENT_NAME.equals(documentName);
    }
}
