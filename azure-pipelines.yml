# Docker image
# Build a Docker image to deploy, run, or push to a container registry.
# Add steps that use Docker Compose, tag images, push to a registry, run an image, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/docker

variables:
  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository/
  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'
  QUARKUS_LOCAL_REPO: $(MAVEN_CACHE_FOLDER)
  LINUX_USE_VMS: $[ not(contains(variables['Build.SourceBranch'], '/pull/')) ]

stages:
  - template: ci-templates/stages.yml
    parameters:
      poolSettings:
         vmImage: 'Ubuntu 16.04'
      displayPrefix: '(Azure Hosted)'
      expectUseVMs: true
#  - template: ci-templates/stages.yml
#    parameters:
#      poolSettings:
#        name: 'Expansion'
#      displayPrefix: '(Expansion)'
#      expectUseVMs: false      
