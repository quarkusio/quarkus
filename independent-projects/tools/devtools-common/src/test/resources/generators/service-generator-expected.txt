package io.quarkus.service;import io.quarkus.model.User;import io.quarkus.repository.UserRepository;import javax.enterprise.context.ApplicationScoped;import javax.inject.Inject;import javax.transaction.Transactional;import javax.validation.ConstraintViolation;import javax.validation.Validator;import java.util.List;import java.util.stream.Collectors;@ApplicationScopedpublic class UserService {    private final UserRepository Repository;    private final Validator validator;    @Inject    public UserService(UserRepository repository, Validator validator) {        this.Repository = repository;        this.validator = validator;    }    public List<User> listAll() {        return Repository.findOrderByName();    }    @Transactional    public User create(User ) {        var violations = validator.validate();        if (violations.isEmpty()) {            Repository.persist();            return Repository.findById(.id);        }        String allViolations = violations.stream()                .map(ConstraintViolation::getMessage)                .collect(Collectors.joining(", "));        /*throw new AppException(400, allViolations);*/    }    public User findById(Long id) {        return Repository.findByIdOptional(id).orElseThrow(() -> {            /* throw new AppException(204, "_id ".concat(String.valueOf(id)).concat(" not found")); */        });    }    @Transactional    public User update(Long id, User ToUpdate) {        var  = this.findById(id);        Repository.persist();        return person;    }    @Transactional    public String delete(long id) {        this.findById(id);        Repository.deleteById(id);        return "deleted";    }}
